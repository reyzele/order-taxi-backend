(window["webpackJsonploft-taxi"]=window["webpackJsonploft-taxi"]||[]).push([[0],{157:function(e,t,n){e.exports={container:"MapBox_container__2nJsC"}},190:function(e,t,n){e.exports=n(317)},199:function(e,t,n){},317:function(e,t,n){"use strict";n.r(t);var r,a,c=n(0),o=n.n(c),i=n(18),s=n.n(i),l=n(35),u=n(22),d=(n(198),n(199),n(16)),m=n(10),f=n(158),p=n(14),b=n.n(p),O=n(15),g=n(151),j=n(356),h=n(357),y=Object(h.a)("LOGIN"),E=Object(h.a)("LOGOUT"),v=Object(h.a)("AUTH"),x=Object(h.a)("HANDLE_PROFILE_SUBMIT"),w=Object(h.a)("HANDLE_PROFILE_CLEAR"),C=Object(j.a)((r={},Object(d.a)(r,y,(function(){return!0})),Object(d.a)(r,E,(function(){return!1})),r),!1),S=Object(j.a)((a={},Object(d.a)(a,x,(function(e,t){return t.payload})),Object(d.a)(a,w,(function(){return{}})),a),{}),N=Object(m.c)({isLoggedIn:C,profile:S}),k=function(e){return e.auth.isLoggedIn},P=function(e){return e.auth.profile},L=function(e){return Object.keys(e.auth.profile).length>0},A=n(46),D=n(154),I=n(93),_=n.n(I),T=function(){var e=Object(D.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.next=3,_.a.get("https://order-taxi-app.glitch.me/auth?username=".concat(n.trim(),"&password=").concat(r.trim()),{method:"GET",mode:"cors"});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){return _.a.get("https://order-taxi-app.glitch.me/addressList",{method:"GET",mode:"cors"}).then((function(e){return e}))},M=function(e){var t=e.address1,n=e.address2;return _.a.get("https://order-taxi-app.glitch.me/route?address1=".concat(t,"&address2=").concat(n),{method:"GET",mode:"cors"}).then((function(e){return e}))},R=b.a.mark(W),U=b.a.mark(q),J=b.a.mark(H);function W(e){var t,n;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(O.a)(T,t);case 4:return n=r.sent,r.abrupt("return",n);case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",{error:r.t0.message});case 11:case"end":return r.stop()}}),R,null,[[1,8]])}function q(e){var t,n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(O.b)(Object(A.b)("loginform"));case 2:return a.next=4,Object(O.a)(W,e);case 4:if(t=a.sent,n=t.error,r=t.data,!n){a.next=12;break}return a.next=10,Object(O.b)(Object(A.c)("loginform",{userName:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438",userPassword:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438",_error:n}));case 10:a.next=20;break;case 12:if(r.success){a.next=17;break}return a.next=15,Object(O.b)(Object(A.c)("loginform",{userName:"\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",userPassword:"\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",_error:r.error}));case 15:a.next=20;break;case 17:if(!r.success){a.next=20;break}return a.next=20,Object(O.b)(y());case 20:case"end":return a.stop()}}),U)}function H(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.e)(v.toString(),q);case 2:case"end":return e.stop()}}),J)}var B=b.a.mark(te),G=b.a.mark(ne),V=b.a.mark(re),Z=b.a.mark(ae),X=b.a.mark(ce);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e){localStorage.state=JSON.stringify(z({},JSON.parse(localStorage.state),{profile:e.payload}))}function Q(){localStorage.state=JSON.stringify(z({},JSON.parse(localStorage.state),{profile:{}}))}function K(){var e=localStorage.state&&JSON.parse(localStorage.state);localStorage.state=JSON.stringify({isLoggedIn:!1,profile:e?z({},e.profile):{}})}function ee(){var e=localStorage.state&&JSON.parse(localStorage.state);localStorage.state=JSON.stringify({isLoggedIn:!0,profile:e?z({},e.profile):{}})}function te(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.e)(x.toString(),$);case 2:case"end":return e.stop()}}),B)}function ne(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.e)(w.toString(),Q);case 2:case"end":return e.stop()}}),G)}function re(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)(E.toString(),K);case 2:case"end":return e.stop()}}),V)}function ae(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)(y.toString(),ee);case 2:case"end":return e.stop()}}),Z)}function ce(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)(te);case 2:return e.next=4,Object(O.c)(ne);case 4:return e.next=6,Object(O.c)(re);case 6:return e.next=8,Object(O.c)(ae);case 8:case"end":return e.stop()}}),X)}var oe,ie,se,le=Object(h.a)("FETCH_ADDRESSES_REQUEST"),ue=Object(h.a)("FETCH_ADDRESSES_SUCCESS"),de=Object(h.a)("FETCH_ADDRESSES_FAILURE"),me=Object(j.a)(Object(d.a)({},ue,(function(e,t){return t.payload})),[]),fe=Object(j.a)((oe={},Object(d.a)(oe,le,(function(){return!0})),Object(d.a)(oe,ue,(function(){return!1})),Object(d.a)(oe,de,(function(){return!1})),oe),null),pe=Object(j.a)((ie={},Object(d.a)(ie,ue,(function(){return null})),Object(d.a)(ie,de,(function(){return"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0441\u0435\u0442\u0438"})),ie),null),be=Object(j.a)((se={},Object(d.a)(se,ue,(function(){return null})),Object(d.a)(se,de,(function(e,t){return t.payload})),se),null),Oe=Object(m.c)({myAddresses:me,isLoadingAddresses:fe,error:be,errorText:pe}),ge=function(e){return e.addresses.isLoadingAddresses},je=function(e){return e.addresses.errorText},he=function(e){return e.addresses.myAddresses},ye=b.a.mark(ve),Ee=b.a.mark(xe);function ve(){var e,t,n;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(O.a)(F);case 3:if(e=r.sent,t=e.error,n=e.data,t){r.next=9;break}return r.next=9,Object(O.b)(ue(n.addresses));case 9:if(!t){r.next=12;break}return r.next=12,Object(O.b)(de(t));case 12:r.next=18;break;case 14:return r.prev=14,r.t0=r.catch(0),r.next=18,Object(O.b)(de(r.t0));case 18:case"end":return r.stop()}}),ye,null,[[0,14]])}function xe(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)(le.toString(),ve);case 2:case"end":return e.stop()}}),Ee)}var we,Ce,Se,Ne=Object(h.a)("FETCH_COORDS_REQUEST"),ke=Object(h.a)("FETCH_COORDS_SUCCESS"),Pe=Object(h.a)("FETCH_COORDS_FAILURE"),Le=Object(h.a)("SET_IS_ORDER_MADE"),Ae=Object(j.a)((we={},Object(d.a)(we,ke,(function(e,t){return t.payload})),Object(d.a)(we,Pe,(function(){return null})),we),null),De=Object(j.a)((Ce={},Object(d.a)(Ce,Ne,(function(){return!0})),Object(d.a)(Ce,ke,(function(){return!1})),Object(d.a)(Ce,Pe,(function(){return!1})),Ce),!1),Ie=Object(j.a)(Object(d.a)({},Le,(function(e,t){return t.payload})),!1),_e=Object(j.a)((Se={},Object(d.a)(Se,ke,(function(){return null})),Object(d.a)(Se,Pe,(function(e,t){return t.payload})),Se),null),Te=Object(m.c)({coords:Ae,isLoadingCoords:De,isOrderMade:Ie,error:_e}),Fe=function(e){return e.coords.isLoadingCoords},Me=function(e){return e.coords.error},Re=function(e){return e.coords.coords},Ue=function(e){return e.coords.isOrderMade},Je=b.a.mark(qe),We=b.a.mark(He);function qe(e){var t,n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(O.a)(M,e.payload);case 3:if(t=a.sent,n=t.error,r=t.data,n){a.next=9;break}return a.next=9,Object(O.b)(ke(r));case 9:if(!n){a.next=12;break}return a.next=12,Object(O.b)(Pe(n));case 12:a.next=18;break;case 14:return a.prev=14,a.t0=a.catch(0),a.next=18,Object(O.b)(Pe(a.t0));case 18:case"end":return a.stop()}}),Je,null,[[0,14]])}function He(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)(Ne.toString(),qe);case 2:case"end":return e.stop()}}),We)}var Be=b.a.mark(Ve),Ge=Object(m.c)({auth:N,addresses:Oe,coords:Te,form:g.a});function Ve(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)(H);case 2:return e.next=4,Object(O.c)(xe);case 4:return e.next=6,Object(O.c)(He);case 6:return e.next=8,Object(O.c)(ce);case 8:case"end":return e.stop()}}),Be)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye=function(){var e=localStorage.state?JSON.parse(localStorage.state):{isLoggedIn:!1,profile:{}},t=e.isLoggedIn,n=e.profile;return void 0===n&&(n={}),void 0===t&&(t=!1),{isLoggedIn:t,profile:n}},ze=function(){var e=Object(f.a)(),t=Object(m.e)(Ge,{auth:Xe({},Ye())},Object(m.d)(Object(m.a)(e),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));return e.run(Ve),t},$e=n(27),Qe=n(28),Ke=n(30),et=n(29),tt=n(31),nt=n(50),rt=n(347),at=n(350),ct=n(351),ot=n(352),it=function(e){function t(){var e,n;Object($e.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(Ke.a)(this,(e=Object(et.a)(t)).call.apply(e,[this].concat(a)))).handleLogout=function(){var e=n.props,t=e.logout;(0,e.setIsOrderMade)(!1),t()},n}return Object(tt.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){var e=this.props.isLoggedIn;return o.a.createElement(rt.a,{position:"static",color:"inherit"},o.a.createElement(at.a,null,o.a.createElement(ct.a,{variant:"h5",style:{flexGrow:1}},"Taxi ordering app"),o.a.createElement(ot.a,{component:l.b,to:"/map",color:"default"},"Map"),o.a.createElement(ot.a,{component:l.b,to:"/profile",color:"default"},"Profile"),e?o.a.createElement(ot.a,{component:l.b,to:"/login",color:"default",onClick:this.handleLogout},"Logout"):o.a.createElement(ot.a,{component:l.b,to:"/login",color:"default"},"Login")))}}]),t}(c.PureComponent),st={logout:E,setIsOrderMade:Le},lt=Object(u.b)((function(e){return{isLoggedIn:k(e)}}),st)(it),ut=n(92),dt=Object(u.b)((function(e){return{isLoggedIn:k(e)}}),null)((function(e){var t=e.component,n=e.isLoggedIn,r=Object(ut.a)(e,["component","isLoggedIn"]);return o.a.createElement(nt.b,Object.assign({},r,{render:function(e){return n?o.a.createElement(t,e):o.a.createElement(nt.a,{to:"/login"})}}))})),mt=n(149),ft=n(152),pt=n(150),bt=n(7),Ot=n(318),gt=n(353),jt=n(354),ht=n(355),yt=function(e){var t=e.type,n=(e.name,e.label),r=e.input,a=e.placeholder,c=e.meta,i=c.touched,s=(c.invalid,c.error),l=Object(ut.a)(e,["type","name","label","input","placeholder","meta"]);return o.a.createElement(ht.a,Object.assign({label:n,placeholder:a||n,margin:"none",type:t,error:i&&s&&!0,helperText:i&&s},r,l))},Et=function(e){function t(){var e,n;Object($e.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(Ke.a)(this,(e=Object(et.a)(t)).call.apply(e,[this].concat(a)))).renderInputs=function(){var e=n.props.classes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(e.alignLeft," ").concat(e.fieldAlign)},o.a.createElement(mt.a,{name:"userName",component:yt,label:"Username",type:"text",fullWidth:!0})),o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(e.alignLeft," ").concat(e.fieldAlign)},o.a.createElement(mt.a,{name:"userPassword",component:yt,label:"Password",type:"password",fullWidth:!0})))},n.renderForm=function(){var e=n.props,t=e.classes,r=e.handleSubmit,a=e.isSubmitting;return o.a.createElement(gt.a,{container:!0,spacing:0,className:t.container,alignItems:"center",justify:"center"},o.a.createElement(gt.a,{item:!0,xs:8,sm:6,md:4},o.a.createElement(Ot.a,{component:"form",onSubmit:r(n.handleSubmit)},o.a.createElement(gt.a,{container:!0,spacing:2,className:t.form},o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignCenter," ").concat(t.fieldAlign)},o.a.createElement(ct.a,{variant:"h4"},"Login")),a?o.a.createElement(gt.a,{item:!0,xs:12,className:t.loader},o.a.createElement(jt.a,null)):n.renderInputs(),o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignLeft," ").concat(t.fieldAlign)},o.a.createElement(ot.a,{variant:"outlined",color:"primary",type:"submit",component:"button"},"Login"))))))},n.handleSubmit=function(e){var t=e.userName,r=e.userPassword;(0,n.props.auth)({username:t,password:r})},n}return Object(tt.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){return this.props.isLoggedIn?o.a.createElement(nt.a,{to:"/map"}):this.renderForm()}}]),t}(c.PureComponent),vt={login:y,auth:v},xt=Object(m.d)(Object(u.b)((function(e){return{isLoggedIn:k(e),isSubmitting:Object(ft.a)("loginform")(e)}}),vt),Object(bt.a)((function(e){return{container:{width:"100%",height:"100%"},form:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch",padding:e.spacing(3)},fieldAlign:{display:"flex"},alignLeft:{justifyContent:"flex-start"},alignCenter:{justifyContent:"center"},loader:{display:"flex",justifyContent:"center",alignItems:"center",height:192}}})),Object(pt.a)({form:"loginform",validate:function(e){var t={};return e.userName?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.userName)||(t.userName="It should be your e-mail"):t.userName="Please enter your login",e.userPassword||(t.userPassword="Please enter your password"),t}}))(Et),wt=n(116),Ct=n.n(wt),St=n(359);function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var kt=function(e){function t(){var e,n;Object($e.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(Ke.a)(this,(e=Object(et.a)(t)).call.apply(e,[this].concat(a)))).state={address1:"",address2:""},n.handleChange=function(e){var t=e.target,r=t.name,a=t.value;n.setState(Object(d.a)({},r,a))},n.handleButtonClick=function(){var e=n.props,t=e.fetchCoordsRequest,r=e.setIsOrderMade,a=n.state,c=a.address1,o=a.address2;c&&o&&t({address1:c,address2:o}),r(!0),n.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{address1:"",address2:""}))},n.renderInputs=function(){var e=n.props,t=e.classes,r=e.MyAddresses,a=n.state,i=a.address1,s=a.address2;return o.a.createElement(c.Fragment,null,o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignCenter," ").concat(t.fieldAlign)},o.a.createElement(ht.a,{id:"address-1",name:"address1",select:!0,margin:"normal",label:"Departure way",value:n.state.address1,onChange:n.handleChange,fullWidth:!0},o.a.createElement(St.a,{value:""},"Departure way"),r.map((function(e){return s===e?null:o.a.createElement(St.a,{key:e,value:e},e)})))),o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignCenter," ").concat(t.fieldAlign)},o.a.createElement(ht.a,{id:"address-2",name:"address2",select:!0,margin:"normal",label:"Destination",value:n.state.address2,onChange:n.handleChange,fullWidth:!0},o.a.createElement(St.a,{value:""},"Destination"),r.map((function(e){return i===e?null:o.a.createElement(St.a,{key:e,value:e},e)})))))},n}return Object(tt.a)(t,e),Object(Qe.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchAddressesRequest,n=e.MyAddresses;n&&0!==n.length||t()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.isLoadingAddresses,r=e.errorText,a=this.state,c=a.address1,i=a.address2;return o.a.createElement(gt.a,{container:!0,spacing:2},o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignCenter," ").concat(t.fieldAlign)},o.a.createElement(ct.a,{variant:"h4"},"Order taxi")),r&&o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignCenter," ").concat(t.fieldAlign)},o.a.createElement(ct.a,{variant:"body1"},r)),n?o.a.createElement(gt.a,{item:!0,xs:12,className:t.loader},o.a.createElement(jt.a,null)):this.renderInputs(),o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignLeft," ").concat(t.fieldAlign)},o.a.createElement(ot.a,{variant:"outlined",color:"primary",component:"button",disabled:!c||!i,onClick:this.handleButtonClick},"Call a taxi")))}}]),t}(c.PureComponent),Pt={fetchAddressesRequest:le,fetchCoordsRequest:Ne,setIsOrderMade:Le},Lt=Object(m.d)(Object(u.b)((function(e){return{isLoadingAddresses:ge(e),errorText:je(e),MyAddresses:he(e),isLoadingCoords:Fe(e)}}),Pt),Object(bt.a)((function(e){return{fieldAlign:{display:"flex"},alignLeft:{justifyContent:"flex-start"},alignCenter:{justifyContent:"center"},loader:{display:"flex",justifyContent:"center",alignItems:"center",height:192}}})))(kt),At=Object(bt.a)((function(){return{fieldAlign:{display:"flex"},alignLeft:{justifyContent:"flex-start"},alignCenter:{justifyContent:"center"}}}))((function(e){var t=e.classes,n=e.header,r=e.body,a=e.btnText,c=e.linkTo;return o.a.createElement(gt.a,{container:!0,spacing:2},o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignCenter," ").concat(t.fieldAlign)},o.a.createElement(ct.a,{variant:"h4"},n)),o.a.createElement(gt.a,{item:!0,xs:12},o.a.createElement(ct.a,{variant:"body1"},r)),o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignLeft," ").concat(t.fieldAlign)},o.a.createElement(ot.a,{component:l.b,variant:"outlined",color:"primary",to:c},a)))})),Dt=function(e){function t(){var e,n;Object($e.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(Ke.a)(this,(e=Object(et.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(){(0,n.props.setIsOrderMade)(!1)},n}return Object(tt.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.errorCoords;return o.a.createElement(gt.a,{container:!0,spacing:2},o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignCenter," ").concat(t.fieldAlign)},o.a.createElement(ct.a,{variant:"h4"},"Order placed")),o.a.createElement(gt.a,{item:!0,xs:12},n&&o.a.createElement(ct.a,{variant:"body1"},n),!n&&o.a.createElement(ct.a,{variant:"body1"},"Your taxi is on its way to you. Will arrive in about 10 minutes")),o.a.createElement(gt.a,{item:!0,xs:12,className:"".concat(t.alignLeft," ").concat(t.fieldAlign)},o.a.createElement(ot.a,{variant:"outlined",color:"primary",component:"button",onClick:this.handleClick},"Make a new order")))}}]),t}(c.PureComponent),It={setIsOrderMade:Le},_t=Object(m.d)(Object(u.b)((function(e){return{errorCoords:Me(e)}}),It),Object(bt.a)((function(){return{fieldAlign:{display:"flex"},alignLeft:{justifyContent:"flex-start"},alignCenter:{justifyContent:"center"}}})))(Dt),Tt=Object(m.d)(Object(u.b)((function(e){return{isProfile:L(e),isOrderMade:Ue(e)}}),null),Object(bt.a)((function(e){return{container:{width:"100%",height:"100%",position:"absolute"},form:{margin:30,maxWidth:300,position:"absolute",zIndex:200,top:70,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch",padding:e.spacing(3)}}})))((function(e){var t=e.classes,n=e.isProfile,r=e.isOrderMade;return o.a.createElement(gt.a,{container:!0,spacing:0,className:t.container,alignItems:"center",justify:"flex-start"},o.a.createElement(gt.a,{item:!0,xs:12,md:8},o.a.createElement(Ot.a,{className:t.form},n&&!r&&o.a.createElement(Lt,null),n&&r&&o.a.createElement(_t,null),!n&&o.a.createElement(At,{header:"Fill in billing information",body:"Enter your bank card information to place an order.",btnText:"go to profile",linkTo:"/profile"}))))})),Ft=n(157),Mt=n.n(Ft),Rt=function(e){function t(){var e,n;Object($e.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(Ke.a)(this,(e=Object(et.a)(t)).call.apply(e,[this].concat(a)))).map=null,n.mapContainer=o.a.createRef(),n.renderRoute=function(){var e=n.props.orderCoords;n.map.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{color:"#F7455D"},geometry:{type:"LineString",coordinates:e}}},paint:{"line-width":8,"line-color":["get","color"]}}),n.map.flyTo({center:e[0]})},n}return Object(tt.a)(t,e),Object(Qe.a)(t,[{key:"componentDidMount",value:function(){Ct.a.accessToken="pk.eyJ1IjoidnZla3NsZXIiLCJhIjoiY2swNDIyY3k5MjBodzNjcHJwYXdiYnA1OSJ9.f_ikZnTIAUm1k_WEuudyCg",this.map=new Ct.a.Map({container:this.mapContainer.current,style:"mapbox://styles/mapbox/streets-v9",center:[34.78,32.07],zoom:15})}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=this.props,n=t.isOrderMade,r=t.orderCoords;!n&&this.map.getLayer("route")&&(this.map.removeLayer("route"),this.map.removeSource("route")),n&&r&&r.length>0&&e.orderCoords!==r&&this.renderRoute()}}},{key:"componentWillUnmount",value:function(){this.map.remove()}},{key:"render",value:function(){return o.a.createElement("div",{className:Mt.a.container,ref:this.mapContainer},o.a.createElement(Tt,null))}}]),t}(c.PureComponent),Ut=Object(u.b)((function(e){return{orderCoords:Re(e),isOrderMade:Ue(e)}}),null)(Rt);function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qt=function(e){return e?e.replace(/[^A-Za-z\s]/,""):""},Ht=function(e){if(!e)return"";var t=e.replace(/[^\d\s]/g,"");return t&&t.substring(0,16).match(/\d{1,4}/g).join(" ")},Bt=function(e){return e?e.replace(/\s/g,""):""},Gt=function(e){if(!e||"/"===e)return"";var t=e.replace(/[^\d\s]/g,"");if(t){var n=t.substring(0,2),r=t.substring(2,4);return+n>12&&(n="12"),"".concat(n,"/").concat(r)}return""},Vt=function(e){if(!e)return"";var t=e.replace(/[^\d]/,"");return t&&t.substring(0,3)},Zt=function(e){function t(){var e,n;Object($e.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(Ke.a)(this,(e=Object(et.a)(t)).call.apply(e,[this].concat(a)))).state={isUpdated:!1},n.requiredFields=["cardName","cardNumber","expDate","cvv"],n.handleSubmit=function(e){var t=n.props.handleProfileSubmit;n.setState(Wt({},n.state,{isUpdated:!0})),t(Wt({},e))},n.handleClear=function(){var e=n.props,t=e.handleProfileClear,r=e.change;n.setState({isUpdated:!1}),n.requiredFields.forEach((function(e){return r(e,"")})),t()},n.renderForm=function(){var e=n.props,t=e.classes,r=e.handleSubmit;return o.a.createElement(c.Fragment,null,o.a.createElement(Ot.a,{component:"form",onSubmit:r(n.handleSubmit)},o.a.createElement(gt.a,{container:!0,spacing:2,className:t.form},o.a.createElement(gt.a,{item:!0,xs:12},o.a.createElement(ct.a,{variant:"h4",className:"".concat(t.alignCenter," ").concat(t.fieldAlign)},"Profile"),o.a.createElement(ct.a,{variant:"h6",className:"".concat(t.alignLeft," ").concat(t.fieldAlign)},"Payment method")),o.a.createElement(gt.a,{item:!0,xs:12,sm:6,md:6},o.a.createElement(mt.a,{name:"cardName",component:yt,label:"Owner`s name",type:"text",required:!0,fullWidth:!0,format:qt})),o.a.createElement(gt.a,{item:!0,xs:12,sm:6,md:6},o.a.createElement(mt.a,{name:"cardNumber",component:yt,label:"Card number",required:!0,fullWidth:!0,format:Ht,parse:Bt})),o.a.createElement(gt.a,{item:!0,xs:12,sm:6,md:6},o.a.createElement(mt.a,{name:"expDate",component:yt,label:"Expiration date",required:!0,fullWidth:!0,placeholder:"__ /__",InputLabelProps:{shrink:!0},format:Gt})),o.a.createElement(gt.a,{item:!0,xs:12,sm:6,md:6},o.a.createElement(mt.a,{name:"cvv",component:yt,label:"CVV",required:!0,fullWidth:!0,format:Vt})),o.a.createElement(gt.a,{item:!0,xs:6,className:"".concat(t.alignLeft," ").concat(t.fieldAlign)},o.a.createElement(ot.a,{variant:"contained",color:"primary",component:"button",type:"submit"},"Save")),o.a.createElement(gt.a,{item:!0,xs:6,className:"".concat(t.alignLeft," ").concat(t.fieldAlign)},o.a.createElement(ot.a,{variant:"contained",color:"primary",component:"button",onClick:n.handleClear},"Clear")))))},n.renderAlert=function(){var e=n.props.classes;return o.a.createElement(c.Fragment,null,o.a.createElement(Ot.a,{className:e.form},o.a.createElement(At,{header:"Profile",body:"Billing information updated. Now you can order a taxi.",btnText:"Go to map",linkTo:"/map"})))},n}return Object(tt.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.isUpdated;return o.a.createElement(gt.a,{container:!0,spacing:0,className:e.container,alignItems:"center",justify:"center"},o.a.createElement(gt.a,{item:!0,xs:10,md:6},t?this.renderAlert():this.renderForm()))}}]),t}(c.PureComponent),Xt={handleProfileSubmit:x,handleProfileClear:w,change:A.a},Yt=Object(m.d)(Object(u.b)((function(e){return{initialValues:P(e)}}),Xt),Object(bt.a)((function(e){return{container:{width:"100%",height:"100%"},form:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(3)},formcolumn:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch"},fieldAlign:{display:"flex"},alignLeft:{justifyContent:"flex-start"},alignCenter:{justifyContent:"center"}}})),Object(pt.a)({form:"profileform",validate:function(e){var t={};if(["cardName","cardNumber","expDate","cvv"].forEach((function(n){e[n]||(t[n]="This is a required field")})),e.expDate){var n=e.expDate.substring(0,2),r=e.expDate.substring(2);+new Date(+("20"+r),+n-1)<Date.now()&&(t.expDate="Invalid date")}return/^\S+\s\S+$/gi.test(e.cardName)||(t.cardName="Enter the name as on the card"),e.cardNumber&&e.cardNumber.length<16&&(t.cardNumber="Card number must be 16 digits"),/^\d{3}$/gi.test(e.cvv)||(t.cvv="CVV must be 3 digits"),t}}))(Zt),zt=function(e){function t(){return Object($e.a)(this,t),Object(Ke.a)(this,Object(et.a)(t).apply(this,arguments))}return Object(tt.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(lt,null),o.a.createElement(nt.d,null,o.a.createElement(nt.b,{path:"/login",component:xt}),o.a.createElement(nt.a,{path:"/",exact:!0,to:"login"}),o.a.createElement(dt,{path:"/map",component:Ut}),o.a.createElement(dt,{path:"/profile",component:Yt})))}}]),t}(c.PureComponent),$t=ze();s.a.render(o.a.createElement(l.a,null,o.a.createElement(u.a,{store:$t},o.a.createElement(zt,null))),document.getElementById("root"))}},[[190,1,2]]]);
//# sourceMappingURL=main.ef00da5f.chunk.js.map